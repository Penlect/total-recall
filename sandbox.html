<head>

</head>

<body>

<table border="1" >
<tr>
<td><input class="recall_input" id="recall_input_0" type="text" maxlength="1"></input></td>
<td><input class="recall_input" id="recall_input_1" type="text" maxlength="1"></input></td>
<td><input class="recall_input" id="recall_input_2" type="text" maxlength="1"></input></td>
</tr>
<tr>
<td><input class="recall_input" id="recall_input_3" type="text" maxlength="1"></input></td>
<td><input class="recall_input" id="recall_input_4" type="text" maxlength="1"></input></td>
<td><input class="recall_input" id="recall_input_5" type="text" maxlength="1"></input></td>
</tr>
</table>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

<script>

class RecallGrid {
	constructor(rows, columns, cell){
		this.rows = rows;
		this.columns = columns;
		this.size = rows*columns;
		this.cell = cell;
	}
	
	navigate(step){
	   var current_id = parseInt(this.cell.attr('id').split('_')[2]);
	   current_id = current_id + step;
	   if(current_id < 0 || current_id > this.size){
			return this.cell;
	   }
	   else{
			return $('#recall_input_' + current_id.toString());
	   }
	}
	
	select_next(){
		this.navigate(1).select();
	}
	
	select_previous(){
		this.navigate(-1).select();
	}
	
	select_up(){
		this.navigate(-this.columns).select();
	}
	
	select_down(){
		this.navigate(this.columns).select();
	}
	
	shift_left(){
	   var current_id = this.cell.attr('id');
	   var new_value = '';
	   var prev_value = null;
	   for(var i = parseInt(current_id.split('_')[2]); i >= 0; i--){
			var cell_id = '#recall_input_' + i.toString();
			prev_value = $(cell_id).val();
			$(cell_id).val(new_value);
			new_value = prev_value;
	   }
	}
	
	shift_right(){
	   var current_id = this.cell.attr('id');
	   var new_value = '';
	   var prev_value = null;
	   for(var i = parseInt(current_id.split('_')[2]); i < this.size; i++){
			var cell_id = '#recall_input_' + i.toString();
			prev_value = $(cell_id).val();
			$(cell_id).val(new_value);
			new_value = prev_value;
	   }
	}
}
	
$(document).ready(function(){

   // User clicks on a cell
   $('.recall_input').keydown(function(e) {
	   e.preventDefault();
	   console.log("Key pressed = " + e.which)
	   
	   var grid = new RecallGrid(2, 3, $(this));
	   
		switch(e.which) {
			case 48: // 0
			case 49:
			case 50:
			case 51:
			case 52:
			case 53:
			case 54:
			case 55:
			case 56:
			case 57: // 9
				console.log("NUMERIC KEY: " + e.which);
				var digit = e.which - 48;
			   $(this).val(digit);
			   grid.select_next();
				break;
			case 39: // Right Arrow
				console.log("RIGHT ARROW KEY: " + e.which);
			   grid.select_next();
				break;
			case 37: // Left Arrow
				console.log("LEFT ARROW KEY: " + e.which);
			   grid.select_previous();
				break;
			case 38: // Up Arrow
				console.log("UP ARROW KEY: " + e.which);
			    grid.select_up();
				break;
			case 40: // Down Arrow
				console.log("DOWN ARROW KEY: " + e.which);
				grid.select_down();
				break;
			case 80: // P character
				console.log("RIGHT SHIFT KEY");
				grid.shift_right()
				break;
			case 77: // M character
				console.log("LEFT SHIFT KEY");
				grid.shift_left()
				break;
			case 8: // Backspace
				console.log("BACKSPACE KEY");
			   $(this).val('');
			   grid.select_previous();
			   break;
			case 46: // Del key
				console.log("DELETE KEY");
			   $(this).val('');
			   grid.select_next();
			   break;
			default:
				console.log("INVALID KEY");
		}
   });
});
</script>
</body>